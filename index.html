<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport"
          content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link rel="stylesheet" href="dist/output.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Nunito+Sans:wght@300;600;800&display=swap" rel="stylesheet">
    <script src="https://kit.fontawesome.com/a53bfd9d13.js" crossorigin="anonymous"></script>
    <title>Countries API</title>
</head>
<body x-data="Countries" class="flex flex-col min-h-screen bg-light-gray">

    <header-component></header-component>

    <main class="flex-grow py-12">
        <div class="flex justify-between items-center px-4 md:px-8 lg:max-w-[1350px] lg:mx-auto">
            <div class="w-full max-w-[35%]">
                <input type="text"
                       class="w-full shadow-md shadow-gray-100 rounded-md p-4 hover:shadow-gray-200 focus:shadow-gray-200"
                       x-model="search"
                       @keyup="searchedCountries"
                       placeholder="Search for a country..."
                />
            </div>

            <div>
                <select x-model="filteredRegion" class="shadow-md shadow-gray-100 rounded-md p-4 cursor-pointer hover:shadow-gray-200">
                    <option value="All">Filter by Region</option>
                    <template x-for="region in $store.Globals.regions">
                        <option :value="region" x-text="region"></option>
                    </template>
                </select>
            </div>
        </div>

        <div class="grid grid-cols-2 px-4 pt-12 gap-6 md:px-8 md:grid-cols-3 lg:grid-cols-4 md:gap-8 lg:gap-16 lg:max-w-[1350px] lg:mx-auto">
            <template x-for="country in searchedCountries">
                <div class="shadow-md shadow-gray-100">
                    <div class="h-40">
                        <a @click="window.location.href = `./country.html/?country=${country.cca3}`"
                           class="cursor-pointer">
                            <img class="rounded-t-md w-full h-full object-cover" :src="`${country.flags.svg}`" :alt="`${country.flags.alt}`">
                        </a>
                    </div>
                    <div class="bg-white p-6 rounded-b-md">
                        <h3 @click="window.location.href = `./country.html/?country=${country.cca3}`"
                            class="font-bold text-lg mb-3 cursor-pointer" x-text="country.name.common"></h3>
                        <ul class="text-sm leading-loose">
                            <li><span class="font-semibold">Population:</span> <span x-text="country.population"></span></li>
                            <li><span class="font-semibold">Region:</span> <span x-text="country.continents"></span></li>
                            <li><span class="font-semibold">Capital:</span> <span x-text="country.capital"></span></li>
                        </ul>
                    </div>
                </div>
            </template>
        </div>

        <countries x-ref="countriesComponent"></countries>
    </main>

    <footer>
        <p class="text-center text-xs py-2">Created by Kevin de Bie</p>
    </footer>

    <loading-spinner></loading-spinner>

    <script defer type="module" src="dist/bundle.js"></script>
</body>
</html>